if("undefined"==typeof MIDI&&(MIDI={}),function(e){"use strict";function n(e){o++;var n=document.body,t=new Audio,a=e.split(";")[0];t.id="audio",t.setAttribute("preload","auto"),t.setAttribute("audiobuffer",!0),t.addEventListener("error",function(){n.removeChild(t),r[a]=!1,o--},!1),t.addEventListener("canplaythrough",function(){n.removeChild(t),r[a]=!0,o--},!1),t.src="data:"+e,n.appendChild(t)}var r={},o=0;e.audioDetect=function(e){if(navigator.requestMIDIAccess){var t=Function.prototype.toString,a=-1!==t.call(navigator.requestMIDIAccess).indexOf("[native code]");if(a)r.webmidi=!0;else for(var i=0;navigator.plugins.length>i;i++){var u=navigator.plugins[i];u.name.indexOf("Jazz-Plugin")>=0&&(r.webmidi=!0)}}if("undefined"==typeof Audio)return void e(r);r.audiotag=!0,(window.AudioContext||window.webkitAudioContext)&&(r.webaudio=!0);var l=new Audio;if(!l.canPlayType)return void e(r);var s=l.canPlayType('audio/ogg; codecs="vorbis"');s="probably"===s||"maybe"===s;var c=l.canPlayType("audio/mpeg");if(c="probably"===c||"maybe"===c,!s&&!c)return void e(r);s&&n("audio/ogg;base64,T2dnUwACAAAAAAAAAADqnjMlAAAAAOyyzPIBHgF2b3JiaXMAAAAAAUAfAABAHwAAQB8AAEAfAACZAU9nZ1MAAAAAAAAAAAAA6p4zJQEAAAANJGeqCj3//////////5ADdm9yYmlzLQAAAFhpcGguT3JnIGxpYlZvcmJpcyBJIDIwMTAxMTAxIChTY2hhdWZlbnVnZ2V0KQAAAAABBXZvcmJpcw9CQ1YBAAABAAxSFCElGVNKYwiVUlIpBR1jUFtHHWPUOUYhZBBTiEkZpXtPKpVYSsgRUlgpRR1TTFNJlVKWKUUdYxRTSCFT1jFloXMUS4ZJCSVsTa50FkvomWOWMUYdY85aSp1j1jFFHWNSUkmhcxg6ZiVkFDpGxehifDA6laJCKL7H3lLpLYWKW4q91xpT6y2EGEtpwQhhc+211dxKasUYY4wxxsXiUyiC0JBVAAABAABABAFCQ1YBAAoAAMJQDEVRgNCQVQBABgCAABRFcRTHcRxHkiTLAkJDVgEAQAAAAgAAKI7hKJIjSZJkWZZlWZameZaouaov+64u667t6roOhIasBACAAAAYRqF1TCqDEEPKQ4QUY9AzoxBDDEzGHGNONKQMMogzxZAyiFssLqgQBKEhKwKAKAAAwBjEGGIMOeekZFIi55iUTkoDnaPUUcoolRRLjBmlEluJMYLOUeooZZRCjKXFjFKJscRUAABAgAMAQICFUGjIigAgCgCAMAYphZRCjCnmFHOIMeUcgwwxxiBkzinoGJNOSuWck85JiRhjzjEHlXNOSuekctBJyaQTAAAQ4AAAEGAhFBqyIgCIEwAwSJKmWZomipamiaJniqrqiaKqWp5nmp5pqqpnmqpqqqrrmqrqypbnmaZnmqrqmaaqiqbquqaquq6nqrZsuqoum65q267s+rZru77uqapsm6or66bqyrrqyrbuurbtS56nqqKquq5nqq6ruq5uq65r25pqyq6purJtuq4tu7Js664s67pmqq5suqotm64s667s2rYqy7ovuq5uq7Ks+6os+75s67ru2rrwi65r66os674qy74x27bwy7ouHJMnqqqnqq7rmarrqq5r26rr2rqmmq5suq4tm6or26os67Yry7aumaosm64r26bryrIqy77vyrJui67r66Ys67oqy8Lu6roxzLat+6Lr6roqy7qvyrKuu7ru+7JuC7umqrpuyrKvm7Ks+7auC8us27oxuq7vq7It/KosC7+u+8Iy6z5jdF1fV21ZGFbZ9n3d95Vj1nVhWW1b+V1bZ7y+bgy7bvzKrQvLstq2scy6rSyvrxvDLux8W/iVmqratum6um7Ksq/Lui60dd1XRtf1fdW2fV+VZd+3hV9pG8OwjK6r+6os68Jry8ov67qw7MIvLKttK7+r68ow27qw3L6wLL/uC8uq277v6rrStXVluX2fsSu38QsAABhwAAAIMKEMFBqyIgCIEwBAEHIOKQahYgpCCKGkEEIqFWNSMuakZM5JKaWUFEpJrWJMSuaclMwxKaGUlkopqYRSWiqlxBRKaS2l1mJKqcVQSmulpNZKSa2llGJMrcUYMSYlc05K5pyUklJrJZXWMucoZQ5K6iCklEoqraTUYuacpA46Kx2E1EoqMZWUYgupxFZKaq2kFGMrMdXUWo4hpRhLSrGVlFptMdXWWqs1YkxK5pyUzDkqJaXWSiqtZc5J6iC01DkoqaTUYiopxco5SR2ElDLIqJSUWiupxBJSia20FGMpqcXUYq4pxRZDSS2WlFosqcTWYoy1tVRTJ6XFklKMJZUYW6y5ttZqDKXEVkqLsaSUW2sx1xZjjqGkFksrsZWUWmy15dhayzW1VGNKrdYWY40x5ZRrrT2n1mJNMdXaWqy51ZZbzLXnTkprpZQWS0oxttZijTHmHEppraQUWykpxtZara3FXEMpsZXSWiypxNhirLXFVmNqrcYWW62ltVprrb3GVlsurdXcYqw9tZRrrLXmWFNtBQAADDgAAASYUAYKDVkJAEQBAADGMMYYhEYpx5yT0ijlnHNSKucghJBS5hyEEFLKnINQSkuZcxBKSSmUklJqrYVSUmqttQIAAAocAAACbNCUWByg0JCVAEAqAIDBcTRNFFXVdX1fsSxRVFXXlW3jVyxNFFVVdm1b+DVRVFXXtW3bFn5NFFVVdmXZtoWiqrqybduybgvDqKqua9uybeuorqvbuq3bui9UXVmWbVu3dR3XtnXd9nVd+Bmzbeu2buu+8CMMR9/4IeTj+3RCCAAAT3AAACqwYXWEk6KxwEJDVgIAGQAAgDFKGYUYM0gxphhjTDHGmAAAgAEHAIAAE8pAoSErAoAoAADAOeecc84555xzzjnnnHPOOeecc44xxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY0wAwE6EA8BOhIVQaMhKACAcAABACCEpKaWUUkoRU85BSSmllFKqFIOMSkoppZRSpBR1lFJKKaWUIqWgpJJSSimllElJKaWUUkoppYw6SimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaVUSimllFJKKaWUUkoppRQAYPLgAACVYOMMK0lnhaPBhYasBAByAwAAhRiDEEJpraRUUkolVc5BKCWUlEpKKZWUUqqYgxBKKqmlklJKKbXSQSihlFBKKSWUUkooJYQQSgmhlFRCK6mEUkoHoYQSQimhhFRKKSWUzkEoIYUOQkmllNRCSB10VFIpIZVSSiklpZQ6CKGUklJLLZVSWkqpdBJSKamV1FJqqbWSUgmhpFZKSSWl0lpJJbUSSkklpZRSSymFVFJJJYSSUioltZZaSqm11lJIqZWUUkqppdRSSiWlkEpKqZSSUmollZRSaiGVlEpJKaTUSimlpFRCSamlUlpKLbWUSkmptFRSSaWUlEpJKaVSSksppRJKSqmllFpJKYWSUkoplZJSSyW1VEoKJaWUUkmptJRSSymVklIBAEAHDgAAAUZUWoidZlx5BI4oZJiAAgAAQABAgAkgMEBQMApBgDACAQAAAADAAAAfAABHARAR0ZzBAUKCwgJDg8MDAAAAAAAAAAAAAACAT2dnUwAEAAAAAAAAAADqnjMlAgAAADzQPmcBAQA="),c&&n("audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq");var d=Date.now(),f=setInterval(function(){var n=Date.now()-d>5e3;(!o||n)&&(clearInterval(f),e(r))},1)}}(MIDI),function(e){"use strict";function n(e){return e.replace(/[^a-z0-9_ ]/gi,"").replace(/[ ]/g,"_").toLowerCase()}function r(e,n){var r=a[n];return r?r[e]:void 0}function o(n,r,o,t){var u=a[r];if(u){t?setTimeout(function(){u[n]=o},t):u[n]=o;var l=e.messageHandler[n]||i[n];l&&l(r,o,t)}}var t=function(e){var r={},o=r.byCategory={},t=r.byId={},a=r.byName={};for(var i in e)for(var u=e[i],l=0,s=u.length;s>l;l++){var c=u[l];if(c){var d=parseInt(c.substr(0,c.indexOf(" ")),10),f=c.replace(d+" ",""),p=n(f),g=n(i),m={id:p,name:f,program:--d,category:i};t[d]=m,a[p]=m,o[g]=o[g]||[],o[g].push(m)}}return r}({Piano:["1 Acoustic Grand Piano","2 Bright Acoustic Piano","3 Electric Grand Piano","4 Honky-tonk Piano","5 Electric Piano 1","6 Electric Piano 2","7 Harpsichord","8 Clavinet"],"Chromatic Percussion":["9 Celesta","10 Glockenspiel","11 Music Box","12 Vibraphone","13 Marimba","14 Xylophone","15 Tubular Bells","16 Dulcimer"],Organ:["17 Drawbar Organ","18 Percussive Organ","19 Rock Organ","20 Church Organ","21 Reed Organ","22 Accordion","23 Harmonica","24 Tango Accordion"],Guitar:["25 Acoustic Guitar (nylon)","26 Acoustic Guitar (steel)","27 Electric Guitar (jazz)","28 Electric Guitar (clean)","29 Electric Guitar (muted)","30 Overdriven Guitar","31 Distortion Guitar","32 Guitar Harmonics"],Bass:["33 Acoustic Bass","34 Electric Bass (finger)","35 Electric Bass (pick)","36 Fretless Bass","37 Slap Bass 1","38 Slap Bass 2","39 Synth Bass 1","40 Synth Bass 2"],Strings:["41 Violin","42 Viola","43 Cello","44 Contrabass","45 Tremolo Strings","46 Pizzicato Strings","47 Orchestral Harp","48 Timpani"],Ensemble:["49 String Ensemble 1","50 String Ensemble 2","51 Synth Strings 1","52 Synth Strings 2","53 Choir Aahs","54 Voice Oohs","55 Synth Choir","56 Orchestra Hit"],Brass:["57 Trumpet","58 Trombone","59 Tuba","60 Muted Trumpet","61 French Horn","62 Brass Section","63 Synth Brass 1","64 Synth Brass 2"],Reed:["65 Soprano Sax","66 Alto Sax","67 Tenor Sax","68 Baritone Sax","69 Oboe","70 English Horn","71 Bassoon","72 Clarinet"],Pipe:["73 Piccolo","74 Flute","75 Recorder","76 Pan Flute","77 Blown Bottle","78 Shakuhachi","79 Whistle","80 Ocarina"],"Synth Lead":["81 Lead 1 (square)","82 Lead 2 (sawtooth)","83 Lead 3 (calliope)","84 Lead 4 (chiff)","85 Lead 5 (charang)","86 Lead 6 (voice)","87 Lead 7 (fifths)","88 Lead 8 (bass + lead)"],"Synth Pad":["89 Pad 1 (new age)","90 Pad 2 (warm)","91 Pad 3 (polysynth)","92 Pad 4 (choir)","93 Pad 5 (bowed)","94 Pad 6 (metallic)","95 Pad 7 (halo)","96 Pad 8 (sweep)"],"Synth Effects":["97 FX 1 (rain)","98 FX 2 (soundtrack)","99 FX 3 (crystal)","100 FX 4 (atmosphere)","101 FX 5 (brightness)","102 FX 6 (goblins)","103 FX 7 (echoes)","104 FX 8 (sci-fi)"],Ethnic:["105 Sitar","106 Banjo","107 Shamisen","108 Koto","109 Kalimba","110 Bagpipe","111 Fiddle","112 Shanai"],Percussive:["113 Tinkle Bell","114 Agogo","115 Steel Drums","116 Woodblock","117 Taiko Drum","118 Melodic Tom","119 Synth Drum","129 Percussion"],"Sound effects":["120 Reverse Cymbal","121 Guitar Fret Noise","122 Breath Noise","123 Seashore","124 Bird Tweet","125 Telephone Ring","126 Helicopter","127 Applause","128 Gunshot"]});t.getProgramSpec=function(r){var o;return(o="string"==typeof r?t.byName[n(r)]:t.byId[r])?o:void e.handleError("invalid program",arguments)},e.getProgram=function(e){return r("program",e)},e.programChange=function(e,n,r){var a=t.getProgramSpec(n);a&&isFinite(n=a.program)&&o("program",e,n,r)},e.getMono=function(e){return r("mono",e)},e.setMono=function(e,n,r){isFinite(n)&&o("mono",e,n,r)},e.getOmni=function(e){return r("omni",e)},e.setOmni=function(e,n,r){isFinite(n)&&o("omni",e,n,r)},e.getSolo=function(e){return r("solo",e)},e.setSolo=function(e,n,r){isFinite(n)&&o("solo",e,n,r)};var a=function(){for(var e={},n=0;15>=n;n++)e[n]={number:n,program:n,pitchBend:0,mute:!1,mono:!1,omni:!1,solo:!1};return e}();e.keyToNote={},e.noteToKey={},function(){for(var n=21,r=108,o=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],t=n;r>=t;t++){var a=(t-12)/12>>0,i=o[t%12]+a;e.keyToNote[i]=t,e.noteToKey[t]=i}}(),e.channels=a,e.GM=t,e.messageHandler={};var i={program:function(n,r,o){e.__api&&(e.player.isPlaying?(e.player.pause(),e.loadProgram(r,e.player.play)):e.loadProgram(r))}};e.handleError=function(e,n){console&&console.error&&console.error(e,n)}}(MIDI),"undefined"==typeof MIDI&&(MIDI={}),MIDI.Soundfont=MIDI.Soundfont||{},MIDI.player=MIDI.player||{},function(e){"use strict";function n(n,o){function t(){u&&u("load",1),e[o].connect(n)}var a=n.format,i=n.instruments,u=n.onprogress,l=n.onerror,s=i.length,c=s;if(s)for(var d=0;s>d;d++){var f=i[d];e.Soundfont[f]?!--c&&t():r(i[d],a,function(e,n){var r=n/s,o=(s-c)/s;u&&u("load",r+o,f)},function(){!--c&&t()},l)}else t()}function r(n,r,o,t,a){var i=e.soundfontUrl+n+"-"+r+".js";e.USE_XHR?galactic.util.request({url:i,format:"text",onerror:a,onprogress:o,onsuccess:function(e,n){var r=document.createElement("script");r.language="javascript",r.type="text/javascript",r.text=n,document.body.appendChild(r),t()}}):dom.loadScript.add({url:i,verify:'MIDI.Soundfont["'+n+'"]',onerror:a,onsuccess:function(){t()}})}"undefined"!=typeof console&&console.log&&console.log("%c♥ MIDI.js 0.4.2 ♥","color: red;"),e.DEBUG=!0,e.USE_XHR=!0,e.soundfontUrl="./soundfont/",e.loadPlugin=function(n,r,t,a){function i(r){var t=location.hash,a="";if(r[n.api]?a=n.api:r[t.substr(1)]?a=t.substr(1):r.webmidi?a="webmidi":window.AudioContext?a="webaudio":window.Audio&&(a="audiotag"),o[a]){if(n.audioFormat)var i=n.audioFormat;else var i=r["audio/ogg"]?"ogg":"mp3";e.__api=a,e.__audioFormat=i,e.supports=r,e.loadProgram(n)}}"function"==typeof n&&(n={onsuccess:n}),n=n||{},n.api=n.api||e.__api,n.soundfontUrl&&(e.soundfontUrl=n.soundfontUrl),e.supports?i(e.supports):e.audioDetect(i)},e.loadProgram=function(){function n(n){var r=n.instruments||n.instrument||e.channels[0].program;"object"!=typeof r&&(r=void 0===r?[]:[r]);for(var o=0;o<r.length;o++){var t=r[o];t===+t&&e.GM.byId[t]&&(r[o]=e.GM.byId[t].id)}return r}return function(r,t,a,i){r=r||{},"object"!=typeof r&&(r={instrument:r}),a&&(r.onerror=a),i&&(r.onprogress=i),t&&(r.onsuccess=t),r.format=e.__audioFormat,r.instruments=n(r),o[e.__api](r)}}();var o={webmidi:function(n){e.WebMIDI.connect(n)},audiotag:function(e){n(e,"AudioTag")},webaudio:function(e){n(e,"WebAudio")}};e.setDefaultPlugin=function(n){for(var r in n)e[r]=n[r]}}(MIDI),"undefined"==typeof MIDI&&(MIDI={}),"undefined"==typeof MIDI.player&&(MIDI.player={}),function(){"use strict";function e(e,r,o,t){return setTimeout(function(){d&&d(e),l.currentTime=o,s.shift();var r=e.channel+"x"+e.noteNumber,t=e.subtype;"noteOn"===t?c[r]=e:"noteOff"===t&&delete c[r],g<l.duration&&(s.length<1e3?n(g,!0):l.currentTime===g&&n(g,!0))},o-t)}function n(n,c,d){c||(l.isPlaying&&o(),l.isPlaying=!0,l.packets=l.replayer.getData(),l.duration=i());var v,h=0,y=l.packets,q=y.length,F=(s[0]&&s[0].interval||0,n-l.currentTime),S=a();if("webaudio"!==MIDI.api&&(v=u(),m=m||v,S.currentTime=(v-m)/1e3),f=S.currentTime,c)var b=p,I=g;else var B=r(n),b=B.idx,I=g=B.offset;for(;q>b&&100>=h;){var w=y[b];p=++b,g+=w[1],n=g-I;var D=w[0].event;if("channel"===D.type){var C=D.subtype;if(!A[C])continue;var E=D.channel,M=MIDI.channels[E],T=S.currentTime+(n+F)/1e3,x=Math.max(0,T+l.timeDelay),K=g-I;switch(C){case"controller":MIDI.setController(E,D.controllerType,D.value,x);break;case"programChange":MIDI.programChange(E,D.programNumber,x);break;case"pitchBend":MIDI.pitchBend(E,D.value,x);break;case"noteOn":if(!M.mute){var U=t(0,127,D.noteNumber+l.transpose);s.push({event:D,time:K,source:MIDI.noteOn(E,U,D.velocity,x),interval:e(D,U,g,I-F)}),h++}break;case"noteOff":if(!M.mute){var U=t(0,127,D.noteNumber+l.transpose);s.push({event:D,time:K,source:MIDI.noteOff(E,U,x),interval:e(D,U,g,I-F)}),h++}}}}d&&d(s)}function r(e){for(var n=l.packets,r=n.length,o=0,t=0;r>o;o++){var a=n[o],i=a[1];if(!(e>t+i))break;t+=i}return{idx:o,offset:t}}function o(){if(l.isPlaying){l.isPlaying=!1;var e=a();for(l.currentTime+=1e3*(e.currentTime-f);s.length;){var n=s.pop();n&&(n.source&&("number"==typeof n.source?clearTimeout(n.source):n.source.disconnect(0)),clearTimeout(n.interval))}for(var r in c){var o=c[r];d({channel:o.channel,noteNumber:o.noteNumber,status:o.status-16,subtype:"noteOff",type:"channel"})}}}function t(e,n,r){return e>r?e:r>n?n:r}function a(){return"webaudio"===MIDI.api?MIDI.WebAudio.getContext():(l.ctx={currentTime:0},l.ctx)}function i(){for(var e=l.packets,n=e.length,r=0,o=0;n>o;o++)r+=e[o][1];return r}function u(){return window.performance&&performance.now?performance.now():Date.now()}var l=MIDI.player;l.currentTime=0,l.duration=0,l.isPlaying=!1,l.BPM=null,l.timeDelay=0,l.timeWarp=1,l.transpose=0,l.play=l.start=function(e){l.currentTime=t(0,l.duration,l.currentTime),n(l.currentTime,null,e)},l.stop=function(){o(),l.currentTime=0},l.pause=function(){o()},l.toggle=function(){l.isPlaying?l.pause():l.play()},l.on=l.addListener=function(e){d=e},l.off=l.removeListener=function(){d=void 0},l.clearAnimation=function(){l.frameId&&cancelAnimationFrame(l.frameId)},l.setAnimation=function(e){var n=0,r=0,o=0;l.clearAnimation(),requestAnimationFrame(function t(){if(l.frameId=requestAnimationFrame(t),l.duration){l.isPlaying?(n=o===l.currentTime?r-Date.now():0,n=0===l.currentTime?0:l.currentTime-n,o!==l.currentTime&&(r=Date.now(),o=l.currentTime)):n=l.currentTime;var a=l.duration,i=n/1e3,u=i/60,s=i-60*u,c=60*u+s,d=a/1e3;if(-1>d-c)return;var f=Math.min(1,c/d);f!==e.progress&&(e.progress=f,e({progress:f,currentTime:c,duration:d}))}})},l.loadFile=function(){function e(){for(var e=MIDI.GM,n={},r={},o=l.packets,t=0;t<o.length;t++){var a=o[t][0].event;if("channel"===a.type){var i=a.channel;switch(a.subtype){case"programChange":r[i]=a.programNumber;break;case"noteOn":var u=r[i];if(u===+u){if(A.programChange)var s=e.byId[u];else var i=MIDI.channels[i],s=e.byId[i.program];n[s.id]=!0}}}}var c=[];for(var d in n)c.push(d);return c}function n(n,r,o){try{l.replayer=new Replayer(MidiFile(l.currentData),1/l.timeWarp,null,l.BPM),l.packets=l.replayer.getData(),l.duration=i(),MIDI.loadPlugin({instruments:e(),onsuccess:n,onprogress:r,onerror:o})}catch(t){o&&o(t)}}function r(e){for(var n=[],r=String.fromCharCode,o=0,t=e.length;t>o;o++)n[o]=r(255&e.charCodeAt(o));return n.join("")}return function(e,o,t,a){"string"==typeof e&&(e={src:e});var i=e.src,o=o||e.onsuccess,a=a||e.onerror,t=t||e.onprogress;if(l.stop(),-1!==i.indexOf("base64,"))l.currentData=atob(i.split(",")[1]),n(o,t,a);else{var u=new XMLHttpRequest;u.open("GET",i),u.overrideMimeType("text/plain; charset=x-user-defined"),u.onreadystatechange=function(){4===this.readyState&&(200===this.status&&this.responseText?(l.currentData=r(this.responseText),n(o,t,a)):a&&a("Unable to load MIDI file."))},u.send()}}}();var s=[],c={},d=void 0,f=0;l.packets={};var p,g,m,A={controller:!0,noteOff:!0,noteOn:!0,pitchBend:!0,programChange:!0};l.handleEvent=function(e,n){A[e]=n}}(),function(e){"use strict";window.Audio&&function(){function n(n,r){if(e.channels[n]){var o=e.channels[n].program,t=e.GM.byId[o].id,r=s[r];if(r){var c=t+""+r.id,d=(i+1)%u.length,f=u[d];if(l[d]=c,!e.Soundfont[t])return void(e.DEBUG&&console.log("404",t));f.src=e.Soundfont[t][r.id],f.volume=a[n]/127,f.play(),i=d}}}function r(n,r){if(e.channels[n]){var o=e.channels[n].program,t=e.GM.byId[o].id,r=s[r];if(r)for(var a=t+""+r.id,c=0,d=u.length;d>c;c++){var f=(c+i+1)%d,p=l[f];if(p&&p==a)return u[f].pause(),void(l[f]=null)}}}for(var o=e.AudioTag={api:"audiotag"},t={},a=function(){for(var e=[],n=0;16>n;n++)e[n]=127;return e}(),i=-1,u=[],l=[],s={},c=0;12>c;c++)u[c]=new Audio;o.audioBuffers=u,o.messageHandler={},o.send=function(e,n){},o.setController=function(e,n,r,o){},o.setVolume=function(e,n){n===+n&&(a[e]=n)},o.pitchBend=function(e,n,r){},o.noteOn=function(e,r,o,a){var i=t[r];if(s[i]){if(a)return setTimeout(function(){n(e,i)},1e3*a);n(e,i)}},o.noteOff=function(e,n,r){},o.chordOn=function(e,r,o,a){for(var i=0;i<r.length;i++){var u=r[i],l=t[u];if(s[l]){if(a)return setTimeout(function(){n(e,l)},1e3*a);n(e,l)}}},o.chordOff=function(e,n,o){for(var a=0;a<n.length;a++){var i=n[a],u=t[i];if(s[u]){if(o)return setTimeout(function(){r(e,u)},1e3*o);r(e,u)}}},o.stopAllNotes=function(){for(var e=0,n=u.length;n>e;e++)u[e].pause()},o.connect=function(n){e.setDefaultPlugin(o);for(var r in e.keyToNote)t[e.keyToNote[r]]=r,s[r]={id:r};n.onsuccess&&n.onsuccess()}}()}(MIDI),function(e){"use strict";window.AudioContext&&function(){function n(e,n,r){if(t){var a=new Audio;a.src=e,a.controls=!1,a.autoplay=!1,a.preload=!1,a.addEventListener("canplay",function(){n&&n(a)}),a.addEventListener("error",function(e){r&&r(e)}),document.body.appendChild(a)}else if(0===e.indexOf("data:audio")){var i=e.split(",")[1],u=Base64Binary.decodeArrayBuffer(i);o.decodeAudioData(u,n,r)}else{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=function(){o.decodeAudioData(l.response,n,r)},l.send()}}function r(){return new(window.AudioContext||window.webkitAudioContext)}var o,t=!1,a=e.WebAudio={api:"webaudio"},i={},u={},l={},s=function(){for(var e=[],n=0;16>n;n++)e[n]=127;return e}();a.audioBuffers=l,a.messageHandler={},a.send=function(e,n){},a.setController=function(e,n,r,o){},a.setVolume=function(e,n,r){n===+n?r?setTimeout(function(){s[e]=n},1e3*r):s[e]=n:console.warn("Volume is not finite")},a.pitchBend=function(n,r,o){var t=e.channels[n];t&&(o?setTimeout(function(){t.pitchBend=r},o):t.pitchBend=r)},a.noteOn=function(n,r,a,c){c=c||0;var d=e.channels[n],f=d.program,p=f+"x"+r,g=l[p];if(g){if(c<o.currentTime&&(c+=o.currentTime),t)var m=o.createMediaElementSource(g);else{var m=o.createBufferSource();m.buffer=g}var A=a/127*(s[n]/127)*2;if(m.playbackRate.value=1,m.gainNode=o.createGain(),m.gainNode.connect(o.destination),m.gainNode.gain.value=Math.min(1,Math.max(-1,A)),m.connect(m.gainNode),u){var v=m.gainNode;for(var h in u)v.connect(u[h].input),v=u[h]}if(t){if(c)return setTimeout(function(){g.currentTime=0,g.play()},1e3*c);g.currentTime=0,g.play()}else m.start(c||0);var y=n+"x"+r;return i[y]=m,m}e.handleError("no buffer",arguments)},a.noteOff=function(n,r,a){a=a||0;var u=e.channels[n],s=u.program,c=s+"x"+r,d=l[c];if(d){a<o.currentTime&&(a+=o.currentTime);var f=n+"x"+r,p=i[f];if(p){if(p.gainNode){var g=p.gainNode.gain;g.linearRampToValueAtTime(g.value,a),g.linearRampToValueAtTime(0,a+.3)}return t?a?setTimeout(function(){d.pause()},1e3*a):d.pause():p.noteOff?p.noteOff(a+.5):p.stop(a+.5),delete i[f],p}}},a.chordOn=function(e,n,r,o){for(var t,i={},u=0,l=n.length;l>u;u++)i[t=n[u]]=a.noteOn(e,t,r,o);return i},a.chordOff=function(e,n,r){for(var o,t={},i=0,u=n.length;u>i;i++)t[o=n[i]]=a.noteOff(e,o,r);return t},a.stopAllNotes=function(){for(var e in i){var n=0;n<o.currentTime&&(n+=o.currentTime);var r=i[e];r.gain.linearRampToValueAtTime(1,n),r.gain.linearRampToValueAtTime(0,n+.3),r.noteOff?r.noteOff(n+.3):r.stop(n+.3),delete i[e]}},a.setEffects=function(n){if(!o.tunajs)return void e.handleError("effects not installed.",arguments);for(var r=0;r<n.length;r++){var t=n[r],a=new o.tunajs[t.type](t);a.connect(o.destination),u[t.type]=a}},a.connect=function(n){e.setDefaultPlugin(a),a.setContext(o||r(),n.onsuccess)},a.getContext=function(){return o},a.setContext=function(r,t,a,i){function u(e){for(var n in p)if(p[n])return;t&&(t(),t=null)}function s(r,o,t,a){var i=r[a];i&&(p[o]++,n(i,function(n){n.id=a;var t=e.keyToNote[a];if(l[o+"x"+t]=n,0===--p[o]){r.isLoaded=!0,e.DEBUG&&console.log("loaded: ",m),u(m)}},function(){e.handleError("audio could not load",arguments)}))}o=r,"undefined"!=typeof Tuna&&(o.tunajs instanceof Tuna||(o.tunajs=new Tuna(o)));var c=[],d=e.keyToNote;for(var f in d)c.push(f);var p={},g=e.Soundfont;for(var m in g){var A=g[m];if(!A.isLoaded){var v=e.GM.byName[m];if(v){var h=v.program;p[h]=0;for(var y=0;y<c.length;y++){var f=c[y];s(A,h,y,f)}}}}setTimeout(u,1)}}()}(MIDI),function(e){"use strict";var n=null,r=e.WebMIDI={api:"webmidi"};r.messageHandler={},r.messageHandler.program=function(e,r,o){n.send([192+e,r],1e3*o)},r.send=function(e,r){n.send(e,1e3*r)},r.setController=function(e,r,o,t){n.send([e,r,o],1e3*t)},r.setVolume=function(e,r,o){n.send([176+e,7,r],1e3*o)},r.pitchBend=function(e,r,o){n.send([224+e,r],1e3*o)},r.noteOn=function(e,r,o,t){n.send([144+e,r,o],1e3*t)},r.noteOff=function(e,r,o){n.send([128+e,r,0],1e3*o)},r.chordOn=function(e,r,o,t){for(var a=0;a<r.length;a++){var i=r[a];n.send([144+e,i,o],1e3*t)}},r.chordOff=function(e,r,o){for(var t=0;t<r.length;t++){var a=r[t];n.send([128+e,a,0],1e3*o)}},r.stopAllNotes=function(){n.cancel();for(var e=0;16>e;e++)n.send([176+e,123,0])},r.connect=function(o){function t(n){if(i&&i(n),window.AudioContext)o.api="webaudio";else{if(!window.Audio)return;o.api="audiotag"}e.loadPlugin(o)}var a=o.onsuccess,i=o.onerror;e.setDefaultPlugin(r),navigator.requestMIDIAccess().then(function(e){var r=e.outputs;n="function"==typeof r?r()[0]:r[0],void 0===n?t():a&&a()},i)}}(MIDI),"undefined"==typeof MIDI)var MIDI={};if(MIDI.Synesthesia=MIDI.Synesthesia||{},function(e){var n={"Isaac Newton (1704)":{format:"HSL",ref:"Gerstner, p.167",english:["red",null,"orange",null,"yellow","green",null,"blue",null,"indigo",null,"violet"],0:[0,96,51],1:[0,0,0],2:[29,94,52],3:[0,0,0],4:[60,90,60],5:[135,76,32],6:[0,0,0],7:[248,82,28],8:[0,0,0],9:[302,88,26],10:[0,0,0],11:[325,84,46]},"Louis Bertrand Castel (1734)":{format:"HSL",ref:"Peacock, p.400",english:["blue","blue-green","green","olive green","yellow","yellow-orange","orange","red","crimson","violet","agate","indigo"],0:[248,82,28],1:[172,68,34],2:[135,76,32],3:[79,59,36],4:[60,90,60],5:[49,90,60],6:[29,94,52],7:[360,96,51],8:[1,89,33],9:[325,84,46],10:[273,80,27],11:[302,88,26]},"George Field (1816)":{format:"HSL",ref:"Klein, p.69",english:["blue",null,"purple",null,"red","orange",null,"yellow",null,"yellow green",null,"green"],0:[248,82,28],1:[0,0,0],2:[302,88,26],3:[0,0,0],4:[360,96,51],5:[29,94,52],6:[0,0,0],7:[60,90,60],8:[0,0,0],9:[79,59,36],10:[0,0,0],11:[135,76,32]},"D. D. Jameson (1844)":{format:"HSL",ref:"Jameson, p.12",english:["red","red-orange","orange","orange-yellow","yellow","green","green-blue","blue","blue-purple","purple","purple-violet","violet"],0:[360,96,51],1:[14,91,51],2:[29,94,52],3:[49,90,60],4:[60,90,60],5:[135,76,32],6:[172,68,34],7:[248,82,28],8:[273,80,27],9:[302,88,26],10:[313,78,37],11:[325,84,46]},"Theodor Seemann (1881)":{format:"HSL",ref:"Klein, p.86",english:["carmine","scarlet","orange","yellow-orange","yellow","green","green blue","blue","indigo","violet","brown","black"],0:[0,58,26],1:[360,96,51],2:[29,94,52],3:[49,90,60],4:[60,90,60],5:[135,76,32],6:[172,68,34],7:[248,82,28],8:[302,88,26],9:[325,84,46],10:[0,58,26],11:[0,0,3]},"A. Wallace Rimington (1893)":{format:"HSL",ref:"Peacock, p.402",english:["deep red","crimson","orange-crimson","orange","yellow","yellow-green","green","blueish green","blue-green","indigo","deep blue","violet"],0:[360,96,51],1:[1,89,33],2:[14,91,51],3:[29,94,52],4:[60,90,60],5:[79,59,36],6:[135,76,32],7:[163,62,40],8:[172,68,34],9:[302,88,26],10:[248,82,28],11:[325,84,46]},"Bainbridge Bishop (1893)":{format:"HSL",ref:"Bishop, p.11",english:["red","orange-red or scarlet","orange","gold or yellow-orange","yellow or green-gold","yellow-green","green","greenish-blue or aquamarine","blue","indigo or violet-blue","violet","violet-red","red"],0:[360,96,51],1:[1,89,33],2:[29,94,52],3:[50,93,52],4:[60,90,60],5:[73,73,55],6:[135,76,32],7:[163,62,40],8:[302,88,26],9:[325,84,46],10:[343,79,47],11:[360,96,51]},"H. von Helmholtz (1910)":{format:"HSL",ref:"Helmholtz, p.22",english:["yellow","green","greenish blue","cayan-blue","indigo blue","violet","end of red","red","red","red","red orange","orange"],0:[60,90,60],1:[135,76,32],2:[172,68,34],3:[211,70,37],4:[302,88,26],5:[325,84,46],6:[330,84,34],7:[360,96,51],8:[10,91,43],9:[10,91,43],10:[8,93,51],11:[28,89,50]},"Alexander Scriabin (1911)":{format:"HSL",ref:"Jones, p.104",english:["red","violet","yellow","steely with the glint of metal","pearly blue the shimmer of moonshine","dark red","bright blue","rosy orange","purple","green","steely with a glint of metal","pearly blue the shimmer of moonshine"],0:[360,96,51],1:[325,84,46],2:[60,90,60],3:[245,21,43],4:[211,70,37],5:[1,89,33],6:[248,82,28],7:[29,94,52],8:[302,88,26],9:[135,76,32],10:[245,21,43],11:[211,70,37]},"Adrian Bernard Klein (1930)":{format:"HSL",ref:"Klein, p.209",english:["dark red","red","red orange","orange","yellow","yellow green","green","blue-green","blue","blue violet","violet","dark violet"],0:[0,91,40],1:[360,96,51],2:[14,91,51],3:[29,94,52],4:[60,90,60],5:[73,73,55],6:[135,76,32],7:[172,68,34],8:[248,82,28],9:[292,70,31],10:[325,84,46],11:[330,84,34]},"August Aeppli (1940)":{format:"HSL",ref:"Gerstner, p.169",english:["red",null,"orange",null,"yellow",null,"green","blue-green",null,"ultramarine blue","violet","purple"],0:[0,96,51],1:[0,0,0],2:[29,94,52],3:[0,0,0],4:[60,90,60],5:[0,0,0],6:[135,76,32],7:[172,68,34],8:[0,0,0],9:[211,70,37],10:[273,80,27],11:[302,88,26]},"I. J. Belmont (1944)":{ref:"Belmont, p.226",english:["red","red-orange","orange","yellow-orange","yellow","yellow-green","green","blue-green","blue","blue-violet","violet","red-violet"],0:[360,96,51],1:[14,91,51],2:[29,94,52],3:[50,93,52],4:[60,90,60],5:[73,73,55],6:[135,76,32],7:[172,68,34],8:[248,82,28],9:[313,78,37],10:[325,84,46],11:[338,85,37]},"Steve Zieverink (2004)":{format:"HSL",ref:"Cincinnati Contemporary Art Center",english:["yellow-green","green","blue-green","blue","indigo","violet","ultra violet","infra red","red","orange","yellow-white","yellow"],0:[73,73,55],1:[135,76,32],2:[172,68,34],3:[248,82,28],4:[302,88,26],5:[325,84,46],6:[326,79,24],7:[1,89,33],8:[360,96,51],9:[29,94,52],10:[62,78,74],11:[60,90,60]},"Circle of Fifths (Johnston 2003)":{format:"RGB",ref:"Joseph Johnston",english:["yellow","blue","orange","teal","red","green","purple","light orange","light blue","dark orange","dark green","violet"],0:[255,255,0],1:[50,0,255],2:[255,150,0],3:[0,210,180],4:[255,0,0],5:[130,255,0],6:[150,0,200],7:[255,195,0],8:[30,130,255],9:[255,100,0],10:[0,200,0],11:[225,0,225]},"Circle of Fifths (Wheatman 2002)":{format:"HEX",ref:"Stuart Wheatman",english:[],data:["#122400","#2E002E","#002914","#470000","#002142","#2E2E00","#290052","#003D00","#520029","#003D3D","#522900","#000080","#244700","#570057","#004D26","#7A0000","#003B75","#4C4D00","#47008F","#006100","#850042","#005C5C","#804000","#0000C7","#366B00","#80007F","#00753B","#B80000","#0057AD","#6B6B00","#6600CC","#008A00","#B8005C","#007F80","#B35900","#2424FF","#478F00","#AD00AD","#00994D","#F00000","#0073E6","#8F8F00","#8A14FF","#00AD00","#EB0075","#00A3A3","#E07000","#6B6BFF","#5CB800","#DB00DB","#00C261","#FF5757","#3399FF","#ADAD00","#B56BFF","#00D600","#FF57AB","#00C7C7","#FF9124","#9999FF","#6EDB00","#FF29FF","#00E070","#FF9999","#7ABDFF","#D1D100","#D1A3FF","#00FA00","#FFA3D1","#00E5E6","#FFC285","#C2C2FF","#80FF00","#FFA8FF","#00E070","#FFCCCC","#C2E0FF","#F0F000","#EBD6FF","#ADFFAD","#FFD6EB","#8AFFFF","#FFEBD6","#EBEBFF","#E0FFC2","#FFEBFF","#E5FFF2","#FFF5F5"]},"Daniel Christopher (2013)":{format:"HEX",english:[],0:"33669A",1:"009999",2:"079948",3:"6FBE44",4:"F6EC13",5:"FFCD05",6:"F89838",7:"EF3B39",8:"CC3366",9:"CB9AC6",10:"89509F",11:"5e2c95"}};e.map=function(e){for(var r,o={},t=function(e,n){return[.5*e[0]+.5*n[0]+.5>>0,.5*e[1]+.5*n[1]+.5>>0,.5*e[2]+.5*n[2]+.5>>0]},a=n[e]||n["D. D. Jameson (1844)"],i=0;88>=i;i++)if(a.data)o[i]={hsl:a.data[i],hex:a.data[i]};else{var u,l,s,c=a[(i+9)%12];switch(a.format){case"HEX":c=Color.Space(c,"W3>HEX>RGB");case"RGB":c=Color.Space(c,"RGB>HSL"),u=c.H>>0,l=c.S>>0,s=c.L>>0;break;case"HSL":u=c[0],l=c[1],s=c[2]}u===l&&l===s&&(c=t(r,a[(i+10)%12])),o[i]={hsl:"hsla("+u+","+l+"%,"+s+"%, 1)",hex:Color.Space({H:u,S:l,L:s},"HSL>RGB>HEX>W3")},r=c}return o}}(MIDI.Synesthesia),"undefined"==typeof dom)var dom={};!function(){"use strict";function e(e,n){try{e=e.split('"').join("").split("'").join("").split("]").join("").split("[").join(".");for(var r=e.split("."),o=r.length,t=n||window,a=0;o>a;a++){var i=r[a];if(null==t[i])return!1;t=t[i]}return!0}catch(u){return!1}}dom.loadScript=function(){return this.loaded={},this.loading={},this},dom.loadScript.prototype.add=function(n){var r=this;"string"==typeof n&&(n={url:n});var o=n.urls;"undefined"==typeof o&&(o=[{url:n.url,verify:n.verify}]);var t=document.getElementsByTagName("head")[0],a=function(n,o){r.loaded[n.url]||o&&e(o)===!1||(r.loaded[n.url]=!0,r.loading[n.url]&&r.loading[n.url](),delete r.loading[n.url],n.onsuccess&&n.onsuccess(),"undefined"!=typeof f&&f())},i=!1,u=[],l=function(e){if("string"==typeof e&&(e={url:e,verify:n.verify}),/([\w\d.\[\]\'\"])$/.test(e.verify)){var o=e.test=e.verify;if("object"==typeof o)for(var l=0;l<o.length;l++)u.push(o[l]);else u.push(o)}if(!r.loaded[e.url]){var c=document.createElement("script");c.onreadystatechange=function(){("loaded"===this.readyState||"complete"===this.readyState)&&a(e)},c.onload=function(){a(e)},c.onerror=function(){if(i=!0,delete r.loading[e.url],"object"==typeof e.test)for(var n in e.test)s(e.test[n]);else s(e.test)},c.setAttribute("type","text/javascript"),c.setAttribute("src",e.url),t.appendChild(c),r.loading[e.url]=function(){}}},s=function(e){for(var n=[],r=0;r<u.length;r++)u[r]!==e&&n.push(u[r]);u=n},c=function(r){if(r)a(r,r.test);else for(var t=0;t<o.length;t++)a(o[t],o[t].test);for(var l=!0,t=0;t<u.length;t++)e(u[t])===!1&&(l=!1);!n.strictOrder&&l?i?n.error&&n.error():n.onsuccess&&n.onsuccess():setTimeout(function(){c(r)},10)};if(n.strictOrder){var d=-1,f=function(){if(d++,o[d]){var e=o[d],t=e.url;r.loading[t]?r.loading[t]=function(){e.onsuccess&&e.onsuccess(),f()}:r.loaded[t]?f():(l(e),c(e))}else i?n.error&&n.error():n.onsuccess&&n.onsuccess()};f()}else for(var d=0;d<o.length;d++)l(o[d]),c(o[d])},dom.loadScript=new dom.loadScript}(),"undefined"!=typeof module&&module.exports&&(module.exports=dom.loadScript),"undefined"==typeof galactic&&(galactic={}),function(e){var n=e.util||(e.util={});if(n.request=function(n,o,t,a){"use strict";"string"==typeof n&&(n={url:n});var i=n.data,u=n.url,l=n.method||(n.data?"POST":"GET"),s=n.format,c=n.headers,d=n.responseType,f=n.withCredentials||!1,a=a||n.onprogress,o=o||n.onsuccess,t=t||n.onerror;if("undefined"!=typeof r&&e.loc.isLocalUrl(u))return void r.readFile(u,"utf8",function(e,n){e?t&&t(e):o&&o({responseText:n})});var p=new XMLHttpRequest;if(p.open(l,u,!0),c)for(var g in c)p.setRequestHeader(g,c[g]);else i&&p.setRequestHeader("Content-type","application/x-www-form-urlencoded");return d&&(p.responseType=d),f&&(p.withCredentials=!0),t&&"onerror"in p&&(p.onerror=t),a&&p.upload&&"onprogress"in p.upload&&(i?p.upload.onprogress=function(e){a.call(p,e,event.loaded/event.total)}:p.addEventListener("progress",function(e){var n=0;if(e.lengthComputable)n=e.total;else if(p.totalBytes)n=p.totalBytes;else{var r=parseInt(p.getResponseHeader("Content-Length-Raw"));if(!isFinite(r))return;p.totalBytes=n=r}a.call(p,e,e.loaded/n)})),p.onreadystatechange=function(n){if(4===p.readyState)if(200===p.status||304===p.status||308===p.status||0===p.status&&e.client.cordova){if(o){var r;if("json"===s)try{r=JSON.parse(n.target.response)}catch(a){t&&t.call(p,n)}else r="xml"===s?n.target.responseXML:"text"===s?n.target.responseText:n.target.response;o.call(p,n,r)}}else t&&t.call(p,n)},p.send(i),p},"undefined"!=typeof module&&module.exports){var r=require("fs");

XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest,module.exports=e.util.request}}(galactic);